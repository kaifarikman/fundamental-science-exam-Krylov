# Компьютерное представление вещественных чисел

## Полулогарифмический формат
Вещественные числа кодируются в полулогарифмическом формате: число задаётся **знаком**, **мантиссой** $m$ и **порядком** $q$ при основании $B$. Порядок хранится **смещённым кодом** (характеристикой). Точность задаётся числом цифр мантиссы $l$, а диапазон представимых чисел — допустимыми значениями порядка $q$.

Плотность представимых вещественных чисел **экспоненциально уменьшается** при росте $|x|$, поэтому **относительная погрешность постоянна**:

$$\frac{\Delta x}{x}=\text{const}.$$

## Вещественная арифметика
Все числа вещественного типа — **приближённые**, поэтому их **нельзя проверять на равенство обычным способом**. Вместо этого сравнивают по $\varepsilon$-окрестности: $|x-y|<\varepsilon$.

**Машинное эпсилон** $\varepsilon$ — наименьшее вещественное число, такое что $1+\varepsilon>1$. Стандартная схема нахождения $\varepsilon$: делить $\varepsilon$ пополам, пока $1+\varepsilon/2>1$.

Для вещественного типа перечисляют **атрибуты и операции**:
- константы **MINREAL**, **MAXREAL**;
- операции **+**, **−**, **·**, **/**;
- отношения порядка;
- функции: **abs, sqrt, sin, cos, exp, ln, arctan**;
- свойство: сложение и умножение «коммутативны только для двух слагаемых» (из-за особенностей вещественной арифметики и округлений).

## Стандарт IEEE 754
**IEEE 754** — широко используемый стандарт IEEE, описывающий формат представления чисел с плавающей точкой. Стандарт описывает:
- формат числа с плавающей точкой: мантисса, экспонента (показатель), знак числа;
- представление положительного и отрицательного нуля, положительной и отрицательной бесконечностей, а также **NaN**;
- методы, используемые для преобразования числа при выполнении математических операций;
- исключительные ситуации: деление на ноль, переполнение, потеря значимости, работа с денормализованными числами и другие;
- операции: арифметические и другие.

## Как хранится число
IEEE 754 хранит вещественное число в виде трёх полей:
- **$s$** — бит знака (0 "+", 1 "-");
- **$E$** — поле порядка (экспоненты) в **смещённом** виде (bias);
- **$F$** — дробная часть мантиссы (fraction).

Идея кодирования:

$$x = (-1)^s \cdot M \cdot 2^{e}.$$

где $e$ получается из $E$ через смещение, а $M$ (мантисса) строится из $F$:
- $1.F$ для нормализованных чисел;
- $0.F$ для денормализованных чисел.
